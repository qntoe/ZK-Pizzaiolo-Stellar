<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dough Duel: Pizza Battle üï∂Ô∏èüçï</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background-color: #1a1a1a; font-family: 'Orbitron', sans-serif; overflow: hidden; }
        .pizza-font { font-family: 'Bangers', cursive; }
        .card-glow:hover { box-shadow: 0 0 15px #ff00ff; transform: translateY(-5px); transition: 0.2s; }
        .dough-bar { transition: width 0.1s linear; }
    </style>
</head>
<body class="flex flex-col items-center justify-center h-screen text-white">

    <!-- Header / Score -->
    <div class="absolute top-4 w-full flex justify-around items-center px-10">
        <div class="bg-blue-600 px-6 py-2 rounded-full border-4 border-white shadow-lg">
            <span class="pizza-font text-2xl">BLUE CLAN</span>
        </div>
        <div class="bg-red-600 px-6 py-2 rounded-full border-4 border-white shadow-lg">
            <span class="pizza-font text-2xl">RED MAFIA</span>
        </div>
    </div>

    <!-- Main Game Area (Arena) -->
    <div id="game-arena" class="border-8 border-gray-800 rounded-xl shadow-2xl overflow-hidden" style="width: 400px; height: 600px;"></div>

    <!-- Bottom UI (Deck & Dough) -->
    <div class="mt-4 w-[450px] bg-gray-900 p-4 rounded-2xl border-2 border-gray-700 shadow-2xl relative">
        <!-- Dough Bar (Elixir) -->
        <div class="w-full h-4 bg-gray-800 rounded-full mb-4 overflow-hidden border border-blue-400">
            <div id="dough-progress" class="dough-bar h-full bg-blue-500 shadow-[0_0_10px_#3b82f6]" style="width: 50%;"></div>
        </div>
        <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-blue-500 px-3 py-0.5 rounded-full text-xs font-bold border border-white">
            DOUGH: <span id="dough-val">5</span>/10
        </div>

        <!-- Cards -->
        <div class="flex justify-between gap-2">
            <div class="card-glow w-24 h-32 bg-gray-800 rounded-lg border-2 border-yellow-500 flex flex-col items-center p-2 cursor-pointer relative overflow-hidden" onclick="playCard('PEP')">
                <span class="absolute top-0 right-0 bg-blue-600 px-2 py-0.5 rounded-bl-lg text-[10px] font-bold">3</span>
                <div class="text-4xl mt-2">üçï</div>
                <span class="text-[10px] font-bold mt-2 uppercase text-yellow-500">Pepperoni</span>
                <span class="text-[8px] text-gray-400">TANK</span>
            </div>
            <div class="card-glow w-24 h-32 bg-gray-800 rounded-lg border-2 border-green-500 flex flex-col items-center p-2 cursor-pointer relative overflow-hidden" onclick="playCard('MUSH')">
                <span class="absolute top-0 right-0 bg-blue-600 px-2 py-0.5 rounded-bl-lg text-[10px] font-bold">2</span>
                <div class="text-4xl mt-2">üçÑ</div>
                <span class="text-[10px] font-bold mt-2 uppercase text-green-500">Mushroom</span>
                <span class="text-[8px] text-gray-400">FAST</span>
            </div>
            <div class="card-glow w-24 h-32 bg-gray-800 rounded-lg border-2 border-red-500 flex flex-col items-center p-2 cursor-pointer relative overflow-hidden" onclick="playCard('CHILLI')">
                <span class="absolute top-0 right-0 bg-blue-600 px-2 py-0.5 rounded-bl-lg text-[10px] font-bold">4</span>
                <div class="text-4xl mt-2">üå∂Ô∏è</div>
                <span class="text-[10px] font-bold mt-2 uppercase text-red-500">Chilli</span>
                <span class="text-[8px] text-gray-400">AOE</span>
            </div>
            <div class="card-glow w-24 h-32 bg-gray-800 rounded-lg border-2 border-purple-500 flex flex-col items-center p-2 cursor-pointer relative overflow-hidden" onclick="playCard('PINE')">
                <span class="absolute top-0 right-0 bg-blue-600 px-2 py-0.5 rounded-bl-lg text-[10px] font-bold">3</span>
                <div class="text-4xl mt-2">üçç</div>
                <span class="text-[10px] font-bold mt-2 uppercase text-purple-500">Pineapple</span>
                <span class="text-[8px] text-gray-400">RANGED</span>
            </div>
        </div>
    </div>

    <!-- ZK Proof Status -->
    <div class="mt-4 text-[10px] text-gray-500 flex items-center gap-2">
        <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
        ZK PROOF GENERATOR ACTIVE | STELLAR TESTNET CONNECTED
    </div>

    <script>
        let dough = 5;
        const config = {
            type: Phaser.AUTO,
            parent: 'game-arena',
            width: 400,
            height: 600,
            backgroundColor: '#2d3436',
            physics: { default: 'arcade', arcade: { debug: false } },
            scene: { preload: preload, create: create, update: update }
        };

        const game = new Phaser.Game(config);
        let playerUnits, enemyUnits;

        function preload() {
            // Generar unidades procedurales r√°pidas
        }

        function create() {
            // Arena Grid
            const g = this.add.graphics();
            g.lineStyle(1, 0x3d3d3d);
            for(let i=0; i<400; i+=25) g.lineBetween(i, 0, i, 600);
            for(let i=0; i<600; i+=25) g.lineBetween(0, i, 400, i);

            // Towers (Pizzas)
            this.add.circle(200, 50, 40, 0xee5253).setStrokeStyle(4, 0xffffff); // Enemy
            this.add.circle(200, 550, 40, 0x341f97).setStrokeStyle(4, 0xffffff); // Player

            playerUnits = this.physics.add.group();
            enemyUnits = this.physics.add.group();

            // Simple Enemy AI Spawn
            this.time.addEvent({
                delay: 3000,
                callback: () => {
                    const x = Phaser.Math.Between(100, 300);
                    const enemy = this.add.circle(x, 100, 15, 0xee5253);
                    enemyUnits.add(enemy);
                    enemy.body.setVelocityY(50);
                },
                loop: true
            });

            // Dough Regeneration
            setInterval(() => {
                if(dough < 10) {
                    dough += 0.5;
                    updateUI();
                }
            }, 1000);
        }

        function updateUI() {
            const bar = document.getElementById('dough-progress');
            const val = document.getElementById('dough-val');
            bar.style.width = (dough * 10) + '%';
            val.innerText = Math.floor(dough);
        }

        function playCard(type) {
            const costs = { PEP: 3, MUSH: 2, CHILLI: 4, PINE: 3 };
            if (dough >= costs[type]) {
                dough -= costs[type];
                updateUI();
                spawnUnit(type);
            } else {
                alert("NOT ENOUGH DOUGH!");
            }
        }

        function spawnUnit(type) {
            const scene = game.scene.scenes[0];
            const x = Phaser.Math.Between(100, 300);
            const color = { PEP: 0xffa502, MUSH: 0x2ed573, CHILLI: 0xff4757, PINE: 0x5352ed };
            
            const unit = scene.add.circle(x, 500, 15, color[type]);
            unit.setStrokeStyle(2, 0xffffff);
            playerUnits.add(unit);
            unit.body.setVelocityY(-80);
        }

        function update() {
            // Collision & Battle Logic here
        }
    </script>
</body>
</html>
