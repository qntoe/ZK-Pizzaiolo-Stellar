<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dough Duel: Pizza Battle üï∂Ô∏èüçï</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background-color: #050505; font-family: 'Orbitron', sans-serif; overflow: hidden; }
        .pizza-font { font-family: 'Bangers', cursive; }
        .card { transition: 0.2s; position: relative; }
        .card:hover { transform: translateY(-10px); filter: brightness(1.2); }
        .card-active { border-color: #3b82f6; box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
        .dough-bar { transition: width 0.2s linear; }
        #game-arena canvas { border-radius: 12px; }
    </style>
</head>
<body class="flex flex-col items-center justify-center h-screen text-white select-none">

    <!-- Scoreboard Ne√≥n -->
    <div class="absolute top-6 w-full flex justify-between px-20 z-10">
        <div class="flex flex-col items-center">
            <div class="bg-blue-900/80 px-6 py-2 rounded-lg border-2 border-blue-400 shadow-[0_0_15px_#3b82f6]">
                <span class="pizza-font text-3xl tracking-widest text-blue-200">BLUE CLAN</span>
            </div>
            <div id="blue-hp" class="mt-2 text-blue-400 font-bold text-sm">HP: 100%</div>
        </div>
        <div class="flex flex-col items-center">
            <div class="bg-red-900/80 px-6 py-2 rounded-lg border-2 border-red-500 shadow-[0_0_15px_#ef4444]">
                <span class="pizza-font text-3xl tracking-widest text-red-200">RED MAFIA</span>
            </div>
            <div id="red-hp" class="mt-2 text-red-400 font-bold text-sm">HP: 100%</div>
        </div>
    </div>

    <!-- Arena de Combate -->
    <div id="game-arena" class="border-4 border-gray-800 rounded-2xl shadow-[0_0_50px_rgba(0,0,0,0.8)] overflow-hidden"></div>

    <!-- UI Inferior (Deck & Dough) -->
    <div class="mt-6 w-[500px] bg-gray-900/90 backdrop-blur-md p-6 rounded-3xl border-2 border-gray-700 shadow-2xl relative">
        <!-- Dough Counter -->
        <div class="absolute -top-6 left-1/2 -translate-x-1/2 flex flex-col items-center">
            <div class="bg-blue-600 px-5 py-1 rounded-full border-2 border-white shadow-lg flex items-center gap-2">
                <span class="text-xs font-black">DOUGH</span>
                <span id="dough-val" class="text-xl font-black">5</span>
            </div>
            <div class="w-64 h-3 bg-gray-800 rounded-full mt-2 border border-blue-400/30 p-0.5">
                <div id="dough-progress" class="dough-bar h-full bg-blue-400 rounded-full shadow-[0_0_10px_#60a5fa]" style="width: 50%;"></div>
            </div>
        </div>

        <!-- Cards Deck -->
        <div class="flex justify-between gap-3 mt-4">
            <!-- Card Template -->
            <div class="card w-28 h-40 bg-gradient-to-b from-gray-800 to-gray-900 rounded-xl border-2 border-yellow-600 p-2 flex flex-col items-center cursor-pointer" onclick="playCard('PEP')">
                <div class="absolute -top-2 -right-2 bg-blue-600 w-8 h-8 rounded-full border-2 border-white flex items-center justify-center font-bold shadow-lg">3</div>
                <div class="text-5xl mt-2 drop-shadow-[0_0_10px_rgba(255,165,0,0.5)]">üçï</div>
                <div class="mt-4 font-black text-[10px] text-yellow-500 tracking-tighter uppercase">Pepperoni Tank</div>
                <div class="text-[8px] text-gray-500 mt-1">HIGH HP / SLOW</div>
            </div>

            <div class="card w-28 h-40 bg-gradient-to-b from-gray-800 to-gray-900 rounded-xl border-2 border-green-600 p-2 flex flex-col items-center cursor-pointer" onclick="playCard('MUSH')">
                <div class="absolute -top-2 -right-2 bg-blue-600 w-8 h-8 rounded-full border-2 border-white flex items-center justify-center font-bold shadow-lg">2</div>
                <div class="text-5xl mt-2 drop-shadow-[0_0_10px_rgba(46,213,115,0.5)]">üçÑ</div>
                <div class="mt-4 font-black text-[10px] text-green-500 tracking-tighter uppercase">Mush Assassin</div>
                <div class="text-[8px] text-gray-500 mt-1">FAST / HIGH DMG</div>
            </div>

            <div class="card w-28 h-40 bg-gradient-to-b from-gray-800 to-gray-900 rounded-xl border-2 border-red-600 p-2 flex flex-col items-center cursor-pointer" onclick="playCard('CHILLI')">
                <div class="absolute -top-2 -right-2 bg-blue-600 w-8 h-8 rounded-full border-2 border-white flex items-center justify-center font-bold shadow-lg">4</div>
                <div class="text-5xl mt-2 drop-shadow-[0_0_10px_rgba(255,71,87,0.5)]">üå∂Ô∏è</div>
                <div class="mt-4 font-black text-[10px] text-red-500 tracking-tighter uppercase">Chilli Flare</div>
                <div class="text-[8px] text-gray-500 mt-1">AOE SPLASH</div>
            </div>

            <div class="card w-28 h-40 bg-gradient-to-b from-gray-800 to-gray-900 rounded-xl border-2 border-purple-600 p-2 flex flex-col items-center cursor-pointer" onclick="playCard('PINE')">
                <div class="absolute -top-2 -right-2 bg-blue-600 w-8 h-8 rounded-full border-2 border-white flex items-center justify-center font-bold shadow-lg">3</div>
                <div class="text-5xl mt-2 drop-shadow-[0_0_10px_rgba(83,82,237,0.5)]">üçç</div>
                <div class="mt-4 font-black text-[10px] text-purple-500 tracking-tighter uppercase">Anan√° Sniper</div>
                <div class="text-[8px] text-gray-500 mt-1">RANGED ATTACK</div>
            </div>
        </div>
    </div>

    <!-- ZK Verifier Console -->
    <div id="zk-log" class="mt-4 font-mono text-[9px] text-blue-400 bg-blue-900/20 px-4 py-2 rounded-lg border border-blue-500/30">
        [SYSTEM] ZK PROOF ENGINE READY | NOIR v1.0 | WAITING FOR CARD PLAY...
    </div>

    <script>
        let dough = 5;
        let blueHP = 100;
        let redHP = 100;

        const config = {
            type: Phaser.AUTO,
            parent: 'game-arena',
            width: 450,
            height: 650,
            backgroundColor: '#1a1c2c',
            physics: { default: 'arcade', arcade: { debug: false } },
            scene: { preload: preload, create: create, update: update }
        };

        const game = new Phaser.Game(config);
        let playerUnits, enemyUnits;

        function preload() {
            // Unidades con estilo 
        }

        function create() {
            const scene = this;
            
            // Arena Graphics
            const graphics = this.add.graphics();
            graphics.lineStyle(2, 0x252a41);
            for(let i=0; i<450; i+=50) graphics.lineBetween(i, 0, i, 650);
            for(let i=0; i<650; i+=50) graphics.lineBetween(0, i, 450, i);

            // Towers
            this.enemyTower = this.add.circle(225, 80, 50, 0xef4444, 0.2).setStrokeStyle(4, 0xef4444);
            this.add.text(205, 70, "üçï", { fontSize: '40px' });

            this.playerTower = this.add.circle(225, 570, 50, 0x3b82f6, 0.2).setStrokeStyle(4, 0x3b82f6);
            this.add.text(205, 550, "üè†", { fontSize: '40px' });

            playerUnits = this.physics.add.group();
            enemyUnits = this.physics.add.group();

            // AI Logic
            this.time.addEvent({
                delay: 4000,
                callback: spawnEnemy,
                callbackScope: this,
                loop: true
            });

            // Collisions
            this.physics.add.overlap(playerUnits, enemyUnits, battle, null, this);
            
            // Dough Regen
            setInterval(() => {
                if(dough < 10) { dough += 0.2; updateUI(); }
            }, 500);
        }

        function spawnEnemy() {
            const x = Phaser.Math.Between(100, 350);
            const enemy = this.add.circle(x, 150, 20, 0xef4444);
            enemy.setStrokeStyle(3, 0xffffff);
            enemyUnits.add(enemy);
            enemy.body.setVelocityY(40);
        }

        function playCard(type) {
            const costs = { PEP: 3, MUSH: 2, CHILLI: 4, PINE: 3 };
            if (dough >= costs[type]) {
                dough -= costs[type];
                updateUI();
                spawnUnit(type);
                logZK(`[ZK] PROVING PLAY: ${type} | COST: ${costs[type]} | STATUS: OK`);
            } else {
                logZK(`[ZK] ERROR: INSUFFICIENT DOUGH FOR ${type}`, true);
            }
        }

        function spawnUnit(type) {
            const scene = game.scene.scenes[0];
            const x = Phaser.Math.Between(100, 350);
            const emojis = { PEP: "üçï", MUSH: "üçÑ", CHILLI: "üå∂Ô∏è", PINE: "üçç" };
            
            const container = scene.add.container(x, 500);
            const circle = scene.add.circle(0, 0, 22, 0x3b82f6).setStrokeStyle(2, 0xffffff);
            const text = scene.add.text(-15, -15, emojis[type], { fontSize: '30px' });
            
            container.add([circle, text]);
            scene.physics.add.existing(container);
            playerUnits.add(container);
            container.body.setVelocityY(-60);
        }

        function battle(p, e) {
            // Efecto de explosi√≥n simple
            p.destroy();
            e.destroy();
            logZK("[BATTLE] TRADING UNITS...");
        }

        function updateUI() {
            document.getElementById('dough-progress').style.width = (dough * 10) + '%';
            document.getElementById('dough-val').innerText = Math.floor(dough);
        }

        function logZK(msg, isError = false) {
            const log = document.getElementById('zk-log');
            log.innerHTML = `<span class="${isError ? 'text-red-500' : 'text-blue-400'}">${msg}</span><br>${log.innerHTML}`;
        }

        function update() {
            playerUnits.children.iterate(u => {
                if(u && u.y < 150) { 
                    u.destroy(); redHP -= 5; 
                    document.getElementById('red-hp').innerText = `HP: ${redHP}%`;
                    if(redHP <= 0) alert("MAFIA DEFEATED! STELLAR VICTORY!");
                }
            });
            enemyUnits.children.iterate(u => {
                if(u && u.y > 500) { 
                    u.destroy(); blueHP -= 5; 
                    document.getElementById('blue-hp').innerText = `HP: ${blueHP}%`;
                }
            });
        }
    </script>
</body>
</html>
